% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sensitivity_analysis.R
\name{calculate_ensemble_metrics}
\alias{calculate_ensemble_metrics}
\title{Calculate Performance Metrics for Ensemble (Custom Calculation)}
\usage{
calculate_ensemble_metrics(
  ensemble_results,
  subbasin_id = "001",
  metric = "KGE",
  spinup = NULL
)
}
\arguments{
\item{ensemble_results}{Results from run_cosero_ensemble() or run_cosero_ensemble_parallel()}

\item{subbasin_id}{Subbasin ID to calculate metrics for (e.g., "001" or 1)}

\item{metric}{Performance metric ("NSE", "KGE", "RMSE", "PBIAS")}

\item{spinup}{Spin-up period in timesteps (optional). If NULL, reads from defaults_settings$SPINUP}
}
\value{
Vector of metric values
}
\description{
Calculates performance metrics by comparing simulated (QSIM) against observed (QOBS) discharge
from COSERO results. Automatically applies spin-up period from defaults_settings.
}
\details{
For standard metrics (NSE, KGE) already calculated by COSERO, use extract_cosero_metrics()
instead - it's faster and guaranteed to match COSERO's evaluation.
}
\examples{
\dontrun{
# Calculate PBIAS (auto-detects spin-up from settings)
pbias <- calculate_ensemble_metrics(results, subbasin_id = "001", metric = "PBIAS")

# Override spin-up period
pbias <- calculate_ensemble_metrics(results, subbasin_id = "001", metric = "PBIAS", spinup = NULL)
}
}
