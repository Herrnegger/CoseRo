% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sensitivity_analysis.R
\name{plot_metric_distribution}
\alias{plot_metric_distribution}
\title{Plot Distribution of Performance Metrics}
\usage{
plot_metric_distribution(
  metric_values,
  metric_name = "Metric",
  reference_value = NULL,
  bins = 30,
  show_median = TRUE,
  show_mean = FALSE
)
}
\arguments{
\item{metric_values}{Numeric vector of metric values from
\code{\link{extract_ensemble_metrics}} or \code{\link{calculate_ensemble_metrics}}}

\item{metric_name}{Name of the metric for axis labels (e.g., "NSE", "KGE").
Default is "Metric"}

\item{reference_value}{Optional numeric value to show as a reference line
(e.g., baseline model performance). Shown as a blue dashed line.}

\item{bins}{Number of histogram bins. Default is 30}

\item{show_median}{Logical. If TRUE (default), show a red dashed vertical
line at the median of the distribution}

\item{show_mean}{Logical. If TRUE, show a green dotted vertical line
at the mean of the distribution. Default is FALSE}
}
\value{
ggplot object showing histogram with density overlay and reference lines
}
\description{
Visualizes the distribution of a performance metric (e.g., NSE, KGE)
across ensemble runs as a histogram with optional reference lines.
The red dashed vertical line shows the median of the distribution.
}
\details{
The plot includes:
\itemize{
\item Gray histogram of metric values
\item Red dashed vertical line: median of the distribution
\item Green dotted vertical line: mean of the distribution (if \code{show_mean = TRUE})
\item Blue dashed vertical line: reference value (if provided)
}
}
\examples{
\dontrun{
# After running ensemble
results <- run_cosero_ensemble_parallel(...)

# Extract NSE values
nse <- extract_ensemble_metrics(results, subbasin_id = "001", metric = "NSE")

# Plot distribution (red line = median)
p <- plot_metric_distribution(nse, metric_name = "NSE")
print(p)

# With baseline reference and mean
p <- plot_metric_distribution(nse, metric_name = "NSE",
                               reference_value = 0.75,
                               show_mean = TRUE)
print(p)

# Compare multiple metrics
kge <- extract_ensemble_metrics(results, subbasin_id = "001", metric = "KGE")
p1 <- plot_metric_distribution(nse, metric_name = "NSE")
p2 <- plot_metric_distribution(kge, metric_name = "KGE")
# patchwork::wrap_plots(p1, p2, ncol = 2)
}
}
\seealso{
\code{\link{extract_ensemble_metrics}} to extract pre-calculated metrics,
\code{\link{calculate_ensemble_metrics}} to calculate metrics from QSIM/QOBS,
\code{\link{plot_ensemble_uncertainty}} for ensemble discharge visualization
}
