% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/winfore_preprocessing.R
\name{write_winfore_et0}
\alias{write_winfore_et0}
\title{Extract WINFORE ET0 for COSERO Input}
\usage{
write_winfore_et0(
  nc_dir,
  output_dir,
  model_zones,
  nz_col = "NZ",
  years = NULL,
  n_cores = 1,
  write_binary = FALSE
)
}
\arguments{
\item{nc_dir}{Directory containing yearly WINFORE ET0 NetCDF files
(pattern: \code{WINFORE2_ET0_YYYY.nc})}

\item{output_dir}{Directory where the output files will be saved}

\item{model_zones}{sf object containing modeling zones (polygons)}

\item{nz_col}{Name of the column with zone IDs (default: \code{"NZ"})}

\item{years}{Optional integer vector of years to process. If \code{NULL},
all available files are processed.}

\item{n_cores}{Number of cores for parallel processing (default: 1).
Uses \pkg{future} and \pkg{furrr} for parallelization.}

\item{write_binary}{If \code{TRUE}, also writes a Fortran-compatible binary
file (default: \code{FALSE}).}
}
\value{
Invisibly returns a list with paths to the generated files:
\item{txt}{Path to the text output file}
\item{bin}{Path to the binary file (or NULL if write_binary=FALSE)}
}
\description{
Processes yearly WINFORE ET0 NetCDF files and writes output in COSERO
meteorological input format. Supports parallel processing and optional
binary output.
}
\section{Output Format}{

The text output file contains one row per day with columns:
\code{YYYY MM DD HH MM val_1 val_2 ... val_NZ}, where each \code{val_i} is
the area-weighted mean ET0 (mm/day) for model zone \code{i}.
}

\examples{
\dontrun{
library(sf)

# Load model zones
zones <- st_read("path/to/model_zones.shp")

# Process all available years (sequential)
write_winfore_et0(
  nc_dir     = "D:/Data/GeoSphere/WINFORE_ET0",
  output_dir = "D:/COSERO_project/input",
  model_zones = zones,
  nz_col     = "NZ"
)

# Process specific years with parallel processing and binary output
write_winfore_et0(
  nc_dir      = "D:/Data/GeoSphere/WINFORE_ET0",
  output_dir  = "D:/COSERO_project/input",
  model_zones = zones,
  nz_col      = "NZ",
  years       = 2000:2024,
  n_cores     = 4,
  write_binary = TRUE
)
}

}
\seealso{
\code{\link{download_geosphere_data}} for downloading WINFORE files,
\code{\link{write_spartacus_precip}} and \code{\link{write_spartacus_temp}}
for SPARTACUS preprocessing.
}
