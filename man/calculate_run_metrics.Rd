% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cosero_metrics.R
\name{calculate_run_metrics}
\alias{calculate_run_metrics}
\title{Calculate Performance Metrics from Single COSERO Run}
\usage{
calculate_run_metrics(
  run_result,
  subbasin_id = "001",
  metric = "KGE",
  spinup = NULL
)
}
\arguments{
\item{run_result}{Result object from run_cosero()}

\item{subbasin_id}{Subbasin ID(s) to calculate metrics for:
\itemize{
\item Single ID: "001" or 1 (returns scalar)
\item Multiple IDs: c("001", "002") (returns named vector)
\item "all": Calculate for all subbasins (returns named vector)
}}

\item{metric}{Performance metric
("NSE", "KGE", "RMSE", "PBIAS")}

\item{spinup}{Spin-up period in timesteps (optional).
If NULL, reads from run_result$defaults_settings$SPINUP}
}
\value{
Single numeric value (if one subbasin) or named vector
(if multiple/all)
}
\description{
Calculates performance metrics by comparing simulated (QSIM)
against observed (QOBS) discharge from a single COSERO run.
Automatically applies spin-up period from run settings.
}
\details{
For standard metrics (NSE, KGE) already calculated by COSERO,
use \code{\link{extract_run_metrics}} instead - it's faster
and guaranteed to match COSERO's evaluation.
}
\examples{
\dontrun{
result <- run_cosero("path/to/project",
  defaults_settings = list(SPINUP = 365))

# Calculate PBIAS for subbasin 001 (auto-detects spin-up)
pbias <- calculate_run_metrics(result,
                               subbasin_id = "001",
                               metric = "PBIAS")

# Multiple subbasins (returns named vector)
nse_multi <- calculate_run_metrics(result,
                                   c("001", "002"), "NSE")

# All subbasins (returns named vector)
nse_all <- calculate_run_metrics(result,
                                 subbasin_id = "all",
                                 metric = "NSE")

# Override spin-up period
kge <- calculate_run_metrics(result,
                             subbasin_id = "001",
                             metric = "KGE",
                             spinup = 100)
}
}
\seealso{
\code{\link{extract_run_metrics}} to extract pre-calculated
metrics (faster),
\code{\link{extract_ensemble_metrics}} for ensemble results,
\code{\link{calculate_ensemble_metrics}} to calculate metrics
for ensembles
}
