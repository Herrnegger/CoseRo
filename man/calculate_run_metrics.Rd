% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cosero_run.R
\name{calculate_run_metrics}
\alias{calculate_run_metrics}
\title{Calculate Performance Metrics from Single COSERO Run}
\usage{
calculate_run_metrics(
  run_result,
  subbasin_id = "001",
  metric = "KGE",
  spinup = NULL
)
}
\arguments{
\item{run_result}{Result object from run_cosero()}

\item{subbasin_id}{Subbasin ID to calculate metrics for (e.g., "001" or 1).
Use "all" to calculate metrics for all subbasins.}

\item{metric}{Performance metric ("NSE", "KGE", "RMSE", "PBIAS")}

\item{spinup}{Spin-up period in timesteps (optional). If NULL, reads from
run_result$defaults_settings$SPINUP}
}
\value{
If subbasin_id is specified: Single numeric value for that subbasin
If subbasin_id = "all": Named vector with metrics for all subbasins
}
\description{
Calculates performance metrics by comparing simulated (QSIM) against observed (QOBS)
discharge from a single COSERO run. Automatically applies spin-up period from
run settings.
}
\details{
For standard metrics (NSE, KGE) already calculated by COSERO, use extract_run_metrics()
instead - it's faster and guaranteed to match COSERO's evaluation.
}
\examples{
\dontrun{
# Run COSERO
result <- run_cosero("path/to/project",
                    defaults_settings = list(SPINUP = 365))

# Calculate PBIAS for subbasin 001 (auto-detects spin-up)
pbias <- calculate_run_metrics(result, subbasin_id = "001", metric = "PBIAS")

# Calculate NSE for all subbasins
nse_all <- calculate_run_metrics(result, subbasin_id = "all", metric = "NSE")

# Override spin-up period
kge <- calculate_run_metrics(result, subbasin_id = "001",
                             metric = "KGE", spinup = 100)
}
}
