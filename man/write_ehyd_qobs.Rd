% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ehyd_preprocessing.R
\name{write_ehyd_qobs}
\alias{write_ehyd_qobs}
\title{eHYD Discharge Data Preprocessing for COSERO}
\usage{
write_ehyd_qobs(
  input_dir,
  output_file,
  gauge_to_nb,
  catchment_name = "COSERO",
  start_date = NULL,
  end_date = NULL,
  na_value = -0.01
)
}
\arguments{
\item{input_dir}{Directory containing raw eHYD \code{Q-Tagesmittel-*.csv} files.}

\item{output_file}{Path to the resulting COSERO QOBS text file.}

\item{gauge_to_nb}{A named numeric or integer vector mapping the eHYD Gauge ID
(\code{HZB-Nummer}) to the COSERO subbasin ID (\code{NB}). The function automatically extracts
the \code{HZB-Nummer} from the raw filenames (e.g., \code{Q-Tagesmittel-210864.csv} -> \code{210864}).
Example: \code{c("210864" = 1, "210880" = 2)}.}

\item{catchment_name}{String for the output file's first line (Title). Default is
\code{"COSERO"}.}

\item{start_date}{Optional start date in \code{YYYY-MM-DD} format or Date object.
If \code{NULL}, calculated as the absolute minimum start date across all files.}

\item{end_date}{Optional end date in \code{YYYY-MM-DD} format or Date object.
If \code{NULL}, calculated as the absolute maximum end date across all files.}

\item{na_value}{Missing value replacement code for COSERO. Default is \code{-0.01}.}
}
\value{
Invisibly returns the generated QOBS data frame in wide format.
}
\description{
Extraction of eHYD daily discharge data (Q-Tagesmittel) for
COSERO hydrological zones. This function parses raw CSV files downloaded from
the Austrian Hydrographic Service (eHYD) and converts them into the standard
COSERO QOBS format.
}
\details{
The Austrian Hydrographic Service (eHYD) provides daily discharge data in CSV
format, typically named \code{Q-Tagesmittel-\{HZB-Nummer\}.csv}. This function
maps these files to specific COSERO subbasins using the \code{gauge_to_nb} argument.

The ``Gauge ID'' in this function maps directly to the \code{HZB-Nummer}.
The function extracts this number directly from the filenames using regular
expressions, allowing you to simply drop the downloaded files into a folder
and provide the mapping vector.

\strong{Missing Data:} If a gauge has "Luecke" (the German keyword for gap) or any
missing days within the combined period across all files, it is automatically
filled with the \code{na_value} (defaulting to \code{-0.01} as required by COSERO).

\strong{Date Period:} If \code{start_date} and \code{end_date} are not explicitly
provided, the function will determine the maximum possible overlapping period by
taking the absolute earliest start date and absolute latest end date across all
processed files. Shorter records will be padded with \code{na_value}.
}
\examples{
\dontrun{
# Map eHYD HZB-Nummer to COSERO Subbasins
gauge_mapping <- c(
  "210864" = 1,  # Gusswerk / Salza
  "210880" = 2,  # Weichselboden / Radmerbach
  "210898" = 3   # Wildalpen / Salza
)

# Full period (auto-calculated)
write_ehyd_qobs(
  input_dir = "D:/Data/eHYD/raw",
  output_file = "D:/COSERO_project/input/Qobs.txt",
  gauge_to_nb = gauge_mapping,
  catchment_name = "COSERO-Wildalpen"
)

# Specific time period
write_ehyd_qobs(
  input_dir = "D:/Data/eHYD/raw",
  output_file = "D:/COSERO_project/input/Qobs.txt",
  gauge_to_nb = gauge_mapping,
  start_date = "1991-01-01",
  end_date = "2024-12-31"
)
}

}
\references{
BML (Federal Ministry of Agriculture, Forestry, Regions and Water Management)
eHYD - WebGIS Application of the Hydrographic Service in Austria.
\href{https://ehyd.gv.at/}{eHYD Portal}
}
